<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Empleado | Matpi</title>

    <link rel="icon" th:href="@{/img/Favicon.png}" />
    <link rel="stylesheet" th:href="@{/css/app.css}">
    <link rel="stylesheet" th:href="@{/css/cssDashboard.css}">
    <link rel="stylesheet" th:href="@{/css/dropdown.css}">
    <link rel="stylesheet" th:href="@{/css/empleados.css}">
</head>

<body>

    <div th:replace="fragments/header :: header('empleados')"></div>

    <main>
        <section class="formulario-seccion">
            <h1>Editar Empleado</h1>

            <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
            <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

            <form th:action="@{/empleados/edit/{id}(id=${empleado.id})}" method="POST">
                <input type="hidden" name="rol" value="EMPLEADO">

                <h4>Datos del Empleado</h4>

                <!-- ID (Documento) - Readonly -->
                <div class="form-group">
                    <label>ID (Documento)</label>
                    <input type="text" name="id" class="form-control" th:value="${empleado.id ?: ''}" readonly>
                </div>

                <!-- Nombre Completo -->
                <div class="form-group">
                    <label>Nombre Completo</label>
                    <input type="text" name="nombreCompleto" class="form-control"
                        th:value="${empleado.nombreCompleto ?: ''}" required>
                </div>

                <!-- Correo Electr√≥nico -->
                <div class="form-group">
                    <label>Correo Electr√≥nico</label>
                    <input type="email" name="correoElectronico" class="form-control"
                        th:value="${empleado.correoElectronico ?: ''}" required>
                </div>

                <!-- Tel√©fono -->
                <div class="form-group">
                    <label>Tel√©fono</label>
                    <input type="text" name="telefono" class="form-control" th:value="${empleado.telefono ?: ''}"
                        required>
                </div>

                <!-- Contrase√±a (Opcional en edici√≥n) -->
                <div class="form-group">
                    <label>Contrase√±a</label>
                    <div class="input-group">
                        <input type="password" id="password" name="password" class="form-control">
                        <button type="button" class="toggle-password"
                            onclick="togglePassword('password', this)">üëÅÔ∏è</button>
                    </div>
                    <div class="input-help" style="font-size: 0.8em; color: #666; margin-top: 5px;">Dejar vac√≠o si no
                        deseas cambiar la contrase√±a</div>
                </div>

                <!-- Direcci√≥n -->
                <div class="form-group">
                    <label>Direcci√≥n</label>
                    <input type="text" name="direccion" class="form-control" th:value="${empleado.direccion ?: ''}"
                        required>
                </div>

                <!-- Estado -->
                <div class="form-group">
                    <label>Estado</label>
                    <select name="estado" class="form-control">
                        <option value="true" th:selected="${empleado.estado == true}">Activo</option>
                        <option value="false" th:selected="${empleado.estado == false}">Inactivo</option>
                    </select>
                </div>

                <!-- Fecha de Ingreso - Readonly -->
                <div class="form-group">
                    <label>Fecha de Ingreso</label>
                    <input type="date" name="fechaIngreso" class="form-control" th:value="${empleado.fechaIngreso}"
                        readonly>
                </div>

                <!-- Experiencia Laboral -->
                <div class="form-group">
                    <label>Experiencia Laboral</label>
                    <input type="text" name="experienciaLaboral" class="form-control"
                        th:value="${empleado.experienciaLaboral ?: ''}" required>
                </div>

                <!-- Fecha de Nacimiento -->
                <div class="form-group">
                    <label>Fecha de Nacimiento</label>
                    <input type="date" name="fechaNacimiento" class="form-control"
                        th:value="${empleado.fechaNacimiento}">
                </div>

                <!-- EPS -->
                <div class="form-group">
                    <label>EPS</label>
                    <select name="eps" class="form-control">
                        <option value="Nueva EPS" th:selected="${empleado.eps == 'Nueva EPS'}">Nueva EPS</option>
                        <option value="Sanitas" th:selected="${empleado.eps == 'Sanitas'}">Sanitas</option>
                        <option value="SURA" th:selected="${empleado.eps == 'SURA'}">SURA</option>
                        <option value="Salud Total" th:selected="${empleado.eps == 'Salud Total'}">Salud Total</option>
                        <option value="Compensar" th:selected="${empleado.eps == 'Compensar'}">Compensar</option>
                        <option value="Famisanar" th:selected="${empleado.eps == 'Famisanar'}">Famisanar</option>
                        <option value="Coosalud" th:selected="${empleado.eps == 'Coosalud'}">Coosalud</option>
                        <option value="Mutual Ser" th:selected="${empleado.eps == 'Mutual Ser'}">Mutual Ser</option>
                        <option value="SOS" th:selected="${empleado.eps == 'SOS'}">SOS</option>
                        <option value="Salud M√≠a" th:selected="${empleado.eps == 'Salud M√≠a'}">Salud M√≠a</option>
                        <option value="Aliansalud" th:selected="${empleado.eps == 'Aliansalud'}">Aliansalud</option>
                    </select>
                </div>

                <!-- Tipo de Contrato -->
                <div class="form-group">
                    <label>Tipo de Contrato</label>
                    <select name="tipoContrato" class="form-control">
                        <option value="Indefinido" th:selected="${empleado.tipoContrato == 'Indefinido'}">Indefinido
                        </option>
                        <option value="Fijo" th:selected="${empleado.tipoContrato == 'Fijo'}">Fijo</option>
                        <option value="Servicios" th:selected="${empleado.tipoContrato == 'Servicios'}">Servicios
                        </option>
                        <option value="Temporal" th:selected="${empleado.tipoContrato == 'Temporal'}">Temporal</option>
                    </select>
                </div>

                <!-- Contacto de Emergencia - Nombre -->
                <div class="form-group">
                    <label>Contacto de Emergencia - Nombre</label>
                    <input type="text" name="contactoEmergenciaNombre" class="form-control"
                        th:value="${empleado.contactoEmergenciaNombre}">
                </div>

                <!-- Contacto de Emergencia - Parentesco -->
                <div class="form-group">
                    <label>Contacto de Emergencia - Parentesco</label>
                    <input type="text" name="contactoEmergenciaParentesco" class="form-control"
                        th:value="${empleado.contactoEmergenciaParentesco}">
                </div>

                <!-- Contacto de Emergencia - N√∫mero -->
                <div class="form-group">
                    <label>Contacto de Emergencia - N√∫mero</label>
                    <input type="text" name="contactoEmergenciaNumero" class="form-control"
                        th:value="${empleado.contactoEmergenciaNumero}">
                </div>

                <!-- Fecha de Terminaci√≥n de Contrato -->
                <div class="form-group">
                    <label>Fecha de Terminaci√≥n de Contrato</label>
                    <input type="date" name="fechaTerminacionContrato" class="form-control"
                        th:value="${empleado.fechaTerminacionContrato}">
                </div>

                <div class="perfil-actions">
                    <button type="submit" class="btn btn-guardar">Actualizar</button>
                    <a th:href="@{/empleados}" class="btn btn-cancelar">Cancelar</a>
                </div>
            </form>
        </section>
    </main>

    <footer>
        <p>¬© 2025 Matpi. Todos los derechos reservados.</p>
        <ul class="footer-links">
            <li><a href="#">Pol√≠tica de privacidad</a></li>
            <li><a href="#">T√©rminos de uso</a></li>
        </ul>
    </footer>

    <script>
        function togglePassword(id, btn) {
            const input = document.getElementById(id);
            if (input.type === "password") {
                input.type = "text";
                btn.textContent = "üôà";
            } else {
                input.type = "password";
                btn.textContent = "üëÅÔ∏è";
            }
        }
    </script>
</body>

</html>